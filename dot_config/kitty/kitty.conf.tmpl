# kitty configuration
# https://sw.kovidgoyal.net/kitty/conf.html

# ====================== FONT ======================
font_family      HackGen35 Console NF Regular
bold_font        HackGen35 Console NF Bold
# HackGen35 Console NF does not include italic styles - use auto or disable
italic_font      auto
bold_italic_font auto
font_size        11

# Font rendering settings for better appearance
disable_ligatures never
font_features none

# macOS font rendering improvements
# Disabled to match Alacritty rendering (default/natural rendering)
# macos_thicken_font 0.75

# ====================== CURSOR ======================
cursor_shape block
cursor_blink_interval 0.75
cursor_stop_blinking_after 5.0

# ====================== SCROLLBACK ======================
scrollback_lines 100000

# ====================== MOUSE ======================
copy_on_select yes
strip_trailing_spaces smart

# ====================== CLIPBOARD ======================
# Allow clipboard read/write without prompts (for Claude Code image paste)
clipboard_control write-clipboard write-primary read-clipboard read-primary

# Enable remote control for clipboard operations (socket-only for security)
allow_remote_control socket-only
listen_on unix:/tmp/kitty-${KITTY_PID}

# ====================== WINDOW ======================
background_opacity 0.8
window_padding_width 8

# Remember window size
remember_window_size yes
initial_window_width  200c
initial_window_height 50c

# ====================== TAB BAR ======================
tab_bar_style powerline
tab_powerline_style slanted

# ====================== SHELL ======================
# Auto-start multiplexer based on .chezmoi.toml.tmpl configuration
# Switch with: switch-multiplexer tmux|zellij
{{- if eq .zsh.multiplexer "zellij" }}
shell /bin/zsh --login -c "/opt/homebrew/bin/zellij attach -c"
{{- else }}
{{-   if eq .chezmoi.arch "arm64" }}
shell /bin/zsh --login -c "/opt/homebrew/bin/tmux a -t 0 || /opt/homebrew/bin/tmux -u"
{{-   else }}
shell /bin/zsh --login -c "/usr/local/bin/tmux a -t 0 || /usr/local/bin/tmux -u"
{{-   end }}
{{- end }}

# ====================== COLORS ======================
# GitHub Dark Default theme (matching Alacritty and Ghostty)

# Basic colors
foreground #b3b1ad
background #0d1117
selection_foreground #b3b1ad
selection_background #1f2937

# Cursor colors
cursor #58a6ff
cursor_text_color #0d1117

# URL underline color when hovering
url_color #58a6ff

# Normal colors
color0 #484f58
color1 #ff7b72
color2 #3fb950
color3 #d29922
color4 #58a6ff
color5 #bc8cff
color6 #39c5cf
color7 #b1bac4

# Bright colors
color8  #6e7681
color9  #ffa198
color10 #56d364
color11 #e3b341
color12 #79c0ff
color13 #d2a8ff
color14 #56d4dd
color15 #f0f6fc

# Extended colors
color16 #d18616
color17 #ffa198

# Tab bar colors
active_tab_foreground   #f0f6fc
active_tab_background   #1f2937
inactive_tab_foreground #b3b1ad
inactive_tab_background #0d1117

# Default terminal
term xterm-256color

# ====================== KEYBOARD SHORTCUTS ======================
# Create new window
map ctrl+shift+n new_window_with_cwd

# Create new tab
map ctrl+shift+t new_tab_with_cwd

# Toggle fullscreen
map cmd+return toggle_fullscreen

# ====================== MACOS SPECIFIC ======================
macos_option_as_alt no
macos_quit_when_last_window_closed yes
macos_traditional_fullscreen yes

# Hide title bar
hide_window_decorations titlebar-only

# Fix Ctrl key handling on macOS
# This ensures Ctrl+A, Ctrl+E, Ctrl+K work correctly in shell
macos_colorspace default

# ====================== PERFORMANCE ======================
repaint_delay 10
input_delay 3
sync_to_monitor yes
