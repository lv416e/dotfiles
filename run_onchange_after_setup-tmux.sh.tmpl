#!/bin/bash
# Setup tmux plugin manager (TPM) and install plugins
# This script runs when tmux.conf changes
# tmux.conf hash: {{ include "dot_tmux.conf.tmpl" | sha256sum }}

set -eufo pipefail

echo "Setting up tmux plugin manager (TPM)..."

# Install TPM if not already installed
if [ ! -d "$HOME/.tmux/plugins/tpm" ]; then
    echo "Installing TPM..."
    git clone https://github.com/tmux-plugins/tpm "$HOME/.tmux/plugins/tpm"
else
    echo "TPM already installed, updating..."
    cd "$HOME/.tmux/plugins/tpm" && git pull
fi

# Note: Plugin installation must be done inside a tmux session
# Automatic installation doesn't work outside tmux

echo "‚úì tmux setup complete!"
echo ""
echo "üìù To install/update tmux plugins:"
echo "   1. Start or attach to a tmux session"
echo "   2. Press 'prefix + I' (Ctrl+g then I) to install plugins"
echo "   3. Press 'prefix + U' (Ctrl+g then U) to update plugins"
